import{r as v,u as L,j as s,F as D,L as B}from"./components-DPsHuwtA.js";import{i as w,G as y,c as j,m as b,A as F}from"./iconBase-jmq2uqsB.js";import{u as H,a as V,b as q,c as U,F as W,I as X,d as G,e as J}from"./index-DYnYCmOj.js";import{D as $,u as Y}from"./SimpleDrawer-BT4iV60b.js";import{P as Q}from"./PrimaryButton-B7VohWgc.js";function Z(e,...i){const t=e.length;function a(){let n="";for(let o=0;o<t;o++){n+=e[o];const r=i[o];r&&(n+=w(r)?r.get():r)}return n}return H(i.filter(w),a)}function K(e){return y({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M0 1.5A1.5 1.5 0 0 1 1.5 0h13A1.5 1.5 0 0 1 16 1.5v2A1.5 1.5 0 0 1 14.5 5h-13A1.5 1.5 0 0 1 0 3.5zM1.5 1a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5z"},child:[]},{tag:"path",attr:{d:"M2 2.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m10.823.323-.396-.396A.25.25 0 0 1 12.604 2h.792a.25.25 0 0 1 .177.427l-.396.396a.25.25 0 0 1-.354 0M0 8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm1 3v2a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2zm14-1V8a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v2zM2 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0 4a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5"},child:[]}]})(e)}function ee(e){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"},child:[]}]})(e)}function R(e){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]}]})(e)}function O(e){return y({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]}]})(e)}function I(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function te(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function S(e,i,t){return i&&te(e.prototype,i),e}function _(e){return+e.replace(/px/,"")}function ie(e){var i=window.devicePixelRatio,t=getComputedStyle(e),a=_(t.getPropertyValue("width")),n=_(t.getPropertyValue("height"));e.setAttribute("width",(a*i).toString()),e.setAttribute("height",(n*i).toString())}function g(e,i){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=Math.random()*(i-e)+e;return Math.floor(a*Math.pow(10,t))/Math.pow(10,t)}function A(e){return e[g(0,e.length)]}var se=.00125,ae=5e-4,ne=9e-4,oe=1e-5,re=6,le=80,ce=.9,ue=1.7,de=.2,he=.6,fe=.03,me=.07,E=15,P=82,pe=150,xe=100,ge=250,ve=40,be=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function M(e){var i=1920;return Math.log(e)/Math.log(i)}var T=function(){function e(i){I(this,e);var t=i.initialPosition,a=i.direction,n=i.confettiRadius,o=i.confettiColors,r=i.emojis,h=i.emojiSize,u=i.canvasWidth,f=g(ce,ue,3),c=f*M(u);this.confettiSpeed={x:c,y:c},this.finalConfettiSpeedX=g(de,he,3),this.rotationSpeed=r.length?.01:g(fe,me,3)*M(u),this.dragForceCoefficient=g(ae,ne,6),this.radius={x:n,y:n},this.initialRadius=n,this.rotationAngle=a==="left"?g(0,.2,3):g(-.2,0,3),this.emojiSize=h,this.emojiRotationAngle=g(0,2*Math.PI),this.radiusYUpdateDirection="down";var x=a==="left"?g(P,E)*Math.PI/180:g(-E,-P)*Math.PI/180;this.absCos=Math.abs(Math.cos(x)),this.absSin=Math.abs(Math.sin(x));var d=g(-pe,0),m={x:t.x+(a==="left"?-d:d)*this.absCos,y:t.y-d*this.absSin};this.currentPosition=Object.assign({},m),this.initialPosition=Object.assign({},m),this.color=r.length?null:A(o),this.emoji=r.length?A(r):null,this.createdAt=new Date().getTime(),this.direction=a}return S(e,[{key:"draw",value:function(t){var a=this.currentPosition,n=this.radius,o=this.color,r=this.emoji,h=this.rotationAngle,u=this.emojiRotationAngle,f=this.emojiSize,c=window.devicePixelRatio;o?(t.fillStyle=o,t.beginPath(),t.ellipse(a.x*c,a.y*c,n.x*c,n.y*c,h,0,2*Math.PI),t.fill()):r&&(t.font="".concat(f,"px serif"),t.save(),t.translate(c*a.x,c*a.y),t.rotate(u),t.textAlign="center",t.fillText(r,0,0),t.restore())}},{key:"updatePosition",value:function(t,a){var n=this.confettiSpeed,o=this.dragForceCoefficient,r=this.finalConfettiSpeedX,h=this.radiusYUpdateDirection,u=this.rotationSpeed,f=this.createdAt,c=this.direction,x=a-f;if(n.x>r&&(this.confettiSpeed.x-=o*t),this.currentPosition.x+=n.x*(c==="left"?-this.absCos:this.absCos)*t,this.currentPosition.y=this.initialPosition.y-n.y*this.absSin*x+se*Math.pow(x,2)/2,this.rotationSpeed-=this.emoji?1e-4:oe*t,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*t%(2*Math.PI);return}h==="down"?(this.radius.y-=t*u,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=t*u,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(t){return this.currentPosition.y<t+xe}}]),e}();function je(){var e=document.createElement("canvas");return e.style.position="fixed",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="1000",e.style.pointerEvents="none",document.body.appendChild(e),e}function ye(e){var i=e.confettiRadius,t=i===void 0?re:i,a=e.confettiNumber,n=a===void 0?e.confettiesNumber||(e.emojis?ve:ge):a,o=e.confettiColors,r=o===void 0?be:o,h=e.emojis,u=h===void 0?e.emojies||[]:h,f=e.emojiSize,c=f===void 0?le:f;return e.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),e.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:t,confettiNumber:n,confettiColors:r,emojis:u,emojiSize:c}}var Ce=function(){function e(i){var t=this;I(this,e),this.canvasContext=i,this.shapes=[],this.promise=new Promise(function(a){return t.resolvePromise=a})}return S(e,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var t;(t=this.shapes).push.apply(t,arguments)}},{key:"complete",value:function(){var t;return this.shapes.length?!1:((t=this.resolvePromise)===null||t===void 0||t.call(this),!0)}},{key:"processShapes",value:function(t,a,n){var o=this,r=t.timeDelta,h=t.currentTime;this.shapes=this.shapes.filter(function(u){return u.updatePosition(r,h),u.draw(o.canvasContext),n?u.getIsVisibleOnCanvas(a):!0})}}]),e}(),Ie=function(){function e(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};I(this,e),this.activeConfettiBatches=[],this.canvas=i.canvas||je(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return S(e,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,ie(this.canvas);var t=new Date().getTime(),a=t-this.lastUpdated,n=this.canvas.offsetHeight,o=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(r){return r.processShapes({timeDelta:a,currentTime:t},n,o),o?!r.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(t)}},{key:"queueAnimationFrameIfNeeded",value:function(t){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=t||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ye(t),n=a.confettiRadius,o=a.confettiNumber,r=a.confettiColors,h=a.emojis,u=a.emojiSize,f=this.canvas.getBoundingClientRect(),c=f.width,x=f.height,d=x*5/7,m={x:0,y:d},p={x:c,y:d},l=new Ce(this.canvasContext),N=0;N<o/2;N++){var z=new T({initialPosition:m,direction:"right",confettiRadius:n,confettiColors:r,confettiNumber:o,emojis:h,emojiSize:u,canvasWidth:c}),k=new T({initialPosition:p,direction:"left",confettiRadius:n,confettiColors:r,confettiNumber:o,emojis:h,emojiSize:u,canvasWidth:c});l.addShapes(z,k)}return this.activeConfettiBatches.push(l),this.queueAnimationFrameIfNeeded(),l.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}},{key:"destroyCanvas",value:function(){this.canvas.remove()}}]),e}();const C=(e=1)=>new Promise(i=>setTimeout(i,e*1e3)),Se=e=>e.addConfetti({confettiRadius:6,confettiColors:["rgb(81 88 246)"]}),Ne=({mode:e="default",emojis:i=["ðŸŽ‰","ðŸ‘¾","ðŸŽŠ","ðŸš€","ðŸ¥³","ðŸŽˆ","ðŸª…"],repeat:t=2,confettiColors:a=["#ff0a54","#ff477e","#ff7096","#ff85a1","#fbb1bd","#f9bec7"]})=>(v.useEffect(()=>{const n=new Ie;(async()=>{if(e==="emojis"){n.addConfetti({emojis:i}),await C(2),n.addConfetti({emojis:i});return}let r=0;for(;r<t;)r++,await C(1),Se(n),await C(1)})()},[]),null),we={title:"Â¿QuÃ© son las future flags?",poster:"https://i.imgur.com/nITUzj1.png",type:"video/mov",src:"https://firebasestorage.googleapis.com/v0/b/fixter-67253.appspot.com/o/fixtergeek.com%2Fmicro-cursos%2Fintrocss%2F1_boxModel.mov?alt=media&token=54cc5e8a-0f90-4df8-9c98-cedfeef6c765"};function Le(){const{isPurchased:e,video:i,videos:t,searchParams:a,moduleNames:n}=L(),[o,r]=v.useState(!1),h=()=>{},u=(i.index+1)%t.length,f=t[u];return s.jsxs(s.Fragment,{children:[s.jsxs("article",{className:"bg-slate-950 relative overflow-x-hidden",children:[s.jsx(Te,{onClickNextVideo:h,type:i.type,src:i.storageLink,poster:i.poster,nextVideo:f,slug:i.slug}),s.jsx(_e,{currentVideoSlug:i.slug,videos:t,moduleNames:n,defaultOpen:!a.success,isLocked:!e})]}),a.success&&s.jsx(Ne,{}),!e&&!i.isPublic&&s.jsxs($,{header:s.jsx(s.Fragment,{}),cta:s.jsx(s.Fragment,{}),className:"z-50",title:"Desbloquea todo el curso",isOpen:!0,children:[s.jsxs("p",{className:"text-2xl text-center pt-20 pb-8",children:["Recuerda que el cÃ³digo de los componentes es Open Source y puedes"," ",s.jsx("a",{className:"text-blue-500 hover:text-blue-600",target:"_blank",rel:"noreferrer",href:"https://github.com/marianaLz/fun-components",children:"copiarlos"})," ","libremente para tus proyectos. ðŸ˜Ž"]}),s.jsxs("p",{className:"text-3xl text-center",children:["Puedes seguir mirando, y construir conmigo todos los componentes paso a paso. ",s.jsx("br",{}),"Â¡Desbloquea el curso completo! ðŸ«¶ðŸ»"]}),s.jsx(D,{method:"POST",children:s.jsx(Q,{onClick:()=>r(!0),isLoading:o,name:"intent",value:"checkout",type:"submit",className:"font-bold w-full mt-20 hover:text-2xl",children:"Â¡Que siga la mÃ¡gia! ðŸŽ©ðŸª„"})})]})]})}const _e=({videos:e,defaultOpen:i,moduleNames:t,currentVideoSlug:a})=>{const[n,o]=v.useState(i),r=V(0),h=q(r,{bounce:.2}),u=U(h,[-400,0],[0,394]),[f,c]=v.useState([]);v.useEffect(()=>{n?r.set(0):r.set(-400)},[n,r]);const x=d=>{if(typeof window>"u")return;let m=localStorage.getItem("watched")||"[]";return m=JSON.parse(m),m.includes(d)};return v.useEffect(()=>{const d=[];t.map(m=>{e.filter(l=>l.moduleName===m).every(l=>x(l.slug))&&d.push(m)}),c(d)},[]),s.jsxs(s.Fragment,{children:[s.jsx(Me,{x:u,onToggle:()=>o(d=>!d),isOpen:n}),s.jsx(Ee,{isOpen:n,x:h,onOutsideClick:()=>o(!1),children:t.map((d,m)=>s.jsxs("div",{children:[s.jsx(Pe,{title:d,subtitle:"capitulo 0"+(m+1),isCompleted:f.includes(d)}),e.filter(p=>p.moduleName===d).map(p=>s.jsx(Ae,{isLocked:!p.isPublic,isCurrent:a===p.slug,slug:p.slug||"",title:p.title||"",duration:p.duration||60},p.id))]},m))})]})},Ae=({isCompleted:e,duration:i,title:t,isCurrent:a,slug:n,isLocked:o})=>s.jsxs(B,{to:`/player?videoSlug=${n}`,reloadDocument:!0,className:j("text-gray-600 pl-2 flex py-4 hover:bg-gray-900 rounded-2xl hover:text-gray-400 transition-all items-center",{"bg-gray-800 my-1 hover:text-white text-white hover:bg-gray-800":a,"cursor-pointer":!o,"cursor-not-allowed":o}),children:[s.jsx("span",{className:j("text-2xl pl-8",{"text-green-500":e,"p-2 bg-indigo-500 rounded-full":a}),children:a?s.jsx(W,{}):e?s.jsx(R,{}):s.jsx(O,{})}),s.jsx("div",{className:"capitalize text-sm pl-8",children:t}),o?s.jsx("span",{className:"ml-auto pr-8",children:s.jsx(X,{})}):s.jsxs("div",{className:"text-xs pl-auto ml-auto pr-8",children:[i,"m"]})]}),Ee=({children:e,x:i=0,onOutsideClick:t,isOpen:a=!1})=>{const n=Y({isActive:a,onOutsideClick:t}),o=Z`linear-gradient(to bottom, white 80%, transparent 100%`;return s.jsx(b.div,{ref:n,style:{x:i,scrollbarWidth:"none",maskImage:o},className:"bg-gray-950 md:w-[380px] w-[300px] absolute z-20 inset-2 rounded-xl overflow-y-scroll h-[88%]",children:e})},Pe=({title:e,subtitle:i,isCompleted:t})=>s.jsxs("header",{className:"text-indigo-600 rounded-lg pl-9 py-3 bg-gray-800 flex items-center gap-4 mb-2",children:[s.jsx("span",{className:j("text-4xl",t&&"text-green-500"),children:t?s.jsx(R,{}):s.jsx(O,{})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-sans capitalize font-extrabold text-white",children:i}),s.jsx("h3",{className:j("text-2xl font-bold font-sans capitalize",{"text-green-500":t}),children:e})]})]}),Me=({isOpen:e,x:i=0,onToggle:t})=>s.jsx(b.button,{whileHover:{scale:1.05},style:{x:i},onClick:t,className:j("absolute bg-gray-900 text-4xl w-20 h-20 text-white top-16 z-20 flex items-center justify-center rounded-r-2xl hover:bg-gray-800",{"left-[-80px] md:left-auto":e,"rounded-2xl":e}),children:s.jsx(F,{mode:"popLayout",children:e?s.jsx(b.span,{initial:{filter:"blur(4px)",opacity:0},animate:{filter:"blur(0px)",opacity:1},exit:{filter:"blur(4px)",opacity:0},children:s.jsx(ee,{})},"open"):s.jsx(b.span,{initial:{filter:"blur(4px)",opacity:0},animate:{filter:"blur(0px)",opacity:1},exit:{filter:"blur(4px)",opacity:0},children:s.jsx(K,{})},"close")})}),Te=({src:e,type:i="video/mov",onPlay:t,onClickNextVideo:a,poster:n,onEnd:o,nextVideo:r=we,slug:h})=>{const u=v.useRef(null),[f,c]=v.useState(!1),[x,d]=v.useState(!1),m=()=>{const l=u.current||null;l&&(l.paused?(l.play(),t==null||t()):l.pause(),c(!l.paused),l.onplaying=()=>c(!0),l.onplay=()=>c(!0),l.onpause=()=>c(!1),l.onended=()=>o==null?void 0:o(),l.ontimeupdate=()=>{l.duration-l.currentTime<15?(d(!0),p()):d(!1)})},p=()=>{if(typeof window>"u")return;let l=localStorage.getItem("watched")||"[]";l=JSON.parse(l),l=[...new Set([...l,h])],localStorage.setItem("watched",JSON.stringify(l))};return s.jsxs("section",{className:"h-screen relative overflow-x-hidden",children:[s.jsxs(F,{children:[!f&&s.jsx(b.button,{onClick:m,initial:{backdropFilter:"blur(4px)"},animate:{backdropFilter:"blur(4px)"},exit:{backdropFilter:"blur(0px)",opacity:0},transition:{duration:.2},className:"absolute inset-0 bottom-16 flex justify-center items-center cursor-pointer z-10",children:s.jsx("span",{className:"border flex items-center justify-center text-6xl text-white rounded-full bg-indigo-500 w-[120px] h-[90px]",children:s.jsx(G,{})})},"play_button"),r.index!==0&&x&&s.jsxs(b.button,{onClick:a,whileTap:{scale:.99},transition:{type:"spring",bounce:.2},whileHover:{scale:1.05},exit:{opacity:0,filter:"blur(9px)",x:50},initial:{opacity:0,filter:"blur(9px)",x:50},animate:{opacity:1,filter:"blur(0px)",x:0},className:"absolute right-2 bg-gray-100 z-20 bottom-20 md:top-4 md:right-4 md:left-auto md:bottom-auto left-2 md:w-[500px] px-6 md:pt-6 pt-10 pb-6 rounded-3xl flex gap-4 shadow-sm items-end",children:[s.jsx("button",{onClick:()=>d(!1),className:"self-end text-4xl active:scale-95 md:hidden absolute right-4 top-1",children:s.jsx(J,{})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-left text-lg",children:"Siguiente video"}),s.jsx("h4",{className:"text-2xl md:w-[280px] md:truncate text-left",children:r.title})]}),s.jsx("img",{alt:"poster",src:r.poster||n,onError:l=>{l.target.src=n,l.target.error=!1},className:"aspect-video w-40 rounded-xl"})]})]}),s.jsxs("video",{poster:n,controlsList:"nodownload",ref:u,className:"w-full h-full",controls:!0,src:e,children:[s.jsx("track",{kind:"captions"}),s.jsx("source",{src:e,type:i})]})]})};export{Le as default};
