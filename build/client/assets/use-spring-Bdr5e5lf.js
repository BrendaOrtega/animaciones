import{u as g,M as V,a as A,b as h,c as M,f as x,i as b,d as f,e as p,g as E,h as R}from"./index-MSxA10Hv.js";import{r as c}from"./jsx-runtime-DYkViK2L.js";function C(t){const n=g(()=>A(t)),{isStatic:r}=c.useContext(V);if(r){const[,o]=c.useState(t);c.useEffect(()=>n.on("change",o),[])}return n}function S(t,n){const r=C(n()),o=()=>r.set(n());return o(),h(()=>{const e=()=>x.preRender(o,!1,!0),s=t.map(a=>a.on("change",e));return()=>{s.forEach(a=>a()),M(o)}}),r}const I=t=>t&&typeof t=="object"&&t.mix,L=t=>I(t)?t.mix:void 0;function D(...t){const n=!Array.isArray(t[0]),r=n?0:-1,o=t[0+r],e=t[1+r],s=t[2+r],a=t[3+r],i=b(e,s,{mixer:L(s[0]),...a});return n?i(o):i}function F(t){f.current=[],t();const n=S(f.current,t);return f.current=void 0,n}function j(t,n,r,o){if(typeof t=="function")return F(t);const e=typeof n=="function"?n:D(n,r,o);return Array.isArray(t)?d(t,e):d([t],([s])=>e(s))}function d(t,n){const r=g(()=>[]);return S(t,()=>{r.length=0;const o=t.length;for(let e=0;e<o;e++)r[e]=t[e].get();return n(r)})}function y(t){return typeof t=="number"?t:parseFloat(t)}function k(t,n={}){const{isStatic:r}=c.useContext(V),o=c.useRef(null),e=C(p(t)?y(t.get()):t),s=c.useRef(e.get()),a=c.useRef(()=>{}),i=()=>{const u=o.current;u&&u.time===0&&u.sample(E.delta),l(),o.current=R({keyframes:[e.get(),s.current],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:a.current})},l=()=>{o.current&&o.current.stop()};return c.useInsertionEffect(()=>e.attach((u,m)=>r?m(u):(s.current=u,a.current=m,x.update(i),e.get()),l),[JSON.stringify(n)]),h(()=>{if(p(t))return t.on("change",u=>e.set(y(u)))},[e]),e}export{C as a,k as b,j as c,S as u};
